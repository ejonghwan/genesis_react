<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>React App</title>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ea8078a1c1485e3ccb93d793f3372e51"></script>
  <style>
    .defaults {
      position: absolute;
      top: -9999px;
    }
    .mask {
      /* width: 100%;;
      height: 100vh;
      background-color: #111;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 100;
      opacity: 1;
      transition: opacity 2s;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      color: #fff; */
    }
    .mask.off {
      opacity: 0;
    }
  </style>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
  <div class="defaults"></div>
  <div class="mask g_sans">...G E N E S I S</div>

  <script>
    // const defaults = document.querySelector('.defaults');
    // const mask = document.querySelector('.mask');
    // let tags = '';
    // const baseURL = '';
    // const imgs = [
    //   // baseURL + '/img/~~',
    //   // baseURL + '/img/~~',
    //   // baseURL + '/img/~~',
    // ]
    // const vids = [
    //   // baseURL + '/img/~~'
    // ]

    // const lenImg = imgs.length;
    // const lenVids = vids.length;

    // function createDOM() {
    //   imgs.forEach(src => {
    //     tags += `
    //       <img src=${src} />
    //     `
    //   })

    //   vids.forEach(src => {
    //     tags += `
    //       <video ${src}></video>
    //     `
    //   })

    //   defaults.innerHTML = tags;
    // }

    // function loadImg() {
    //   return new Promise((res, rej) => {
    //     let count = 0;
    //     const imgDOM = defaults.querySelectorAll('img');

    //     imgDOM.forEach(img => {
    //       img.onload = () => {
    //         count++;
    //         console.log('img loaded', count);
    //         if(count === lenImg) { res(true) }
    //       }
    //     })
    //   }) 
    // }

    // function loadVid() {
    //   return new Promise((res, rej) => {
    //     let count = 0;
    //     const imgDOM = defaults.querySelectorAll('video');

    //     vidDOM.forEach(vid => {
    //       vid.onloadeddata = () => {
    //         count++;
    //         console.log('vid loaded', count);
    //         if(count === lenVids) { res(true) }
    //       }
    //     })
    //   }) 
    // }

    // // promise.all vs promise.race
    // // promise.all : 전달받은 모든 promise가 완료되어야 동기처리 
    // // promise.race : 전달받은 모든 promise 중 하나만 완료되면 동기처리

    // Promise.all([loadImg(), loadVid()]).then(() => {
    //   mask.classList.add('off')
    //   setTimeout(() => {
    //     mask.remove();
    //     defaults.remove();
    //   }, 2000)
    // })

  </script>
</body>





<!-- 

이미지, 영상을 리액트 컴포넌트가 마운트 되기 전 미리 캐싱처리
1. 배열에 캐싱할 이미지와 영상의 url을 각각 담아줌
2. index.html에 생성되는 동안 마스크 화면을 대신보여줌 
3. 돔이 인덱스에 생성되는 동안 마스크화면을 대신 보여줌
4. 모든, 영상 이미지가 캐싱 완료되면 마스크를 강제 제거하고 동적으로 생성된 요소도 제거 
5. 그 사이 리액트 컴포넌트들이 리얼 돔으로 변환되면서 화면에 출력

 -->


</html>